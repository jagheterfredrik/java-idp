#!/bin/sh

SHIB_HOME=/usr/local/tomcat/webapps/shibboleth

#Where log4j config file is
LOG_CONFIG=$SHIB_HOME/WEB-INF/classes/conf/log4j.properties

#Where to find jar files...
LIB=$SHIB_HOME/WEB-INF/lib
CP=$LIB/../classes:$LIB/log4j-1.2.5.jar:$LIB/opensaml.jar:$LIB/xalan-2.4.1.jar:$LIB/dom3-xercesImpl-2.4.0.jar:$LIB/dom3-xml-apis-2.4.0.jar:$LIB/xmlsec-1.0.5.jar

if [ -n JAVA_HOME ]
	then
		$JAVA_HOME/bin/java -Djava.endorsed.dirs="$LIB" -Dlog.config=$LOG_CONFIG -cp $CP edu.internet2.middleware.shibboleth.common.SiteSigner -o $SHIB_HOME/sites.xml $@ $SHIB_HOME/sites_unsigned.xml
		$JAVA_HOME/bin/java -Djava.endorsed.dirs="$LIB" -Dlog.config=$LOG_CONFIG -cp $CP edu.internet2.middleware.shibboleth.common.SiteSigner -o $SHIB_HOME/trust.xml $@ $SHIB_HOME/trust_unsigned.xml
	else
		echo "JAVA_HOME not set."
fi
