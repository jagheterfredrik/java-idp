<?xml version="1.0" encoding="UTF-8"?>

<!-- Test IdP configuration file for Example Entity
	 There is one Metadata Entity: urn:mace:inqueue:example.org
	 It has both IdP and SP Roles.
	 It has one server: //shibboleth.example.org:8080
	 The endpoints are in the /shibboleth context on the server
	 
	 Dependencies:
	 Must agreed with referenced external ExampleMetadata file.
	 Endpoints must agree with Servlet mappings in web.xml
	 Certificates must be generated for these names
	 The "hosts" file maps shibboleth.example.org to 127.0.0.1
-->

<IdPConfig 
	xmlns="urn:mace:shibboleth:idp:config:1.0" 
	xmlns:cred="urn:mace:shibboleth:credentials:1.0" 
	xmlns:name="urn:mace:shibboleth:namemapper:1.0" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="urn:mace:shibboleth:idp:config:1.0 shibboleth-idpconfig-1.0.xsd" 
	AAUrl="http://shibboleth.example.org:8080/shibboleth/AA" 
	resolverConfig="/conf/resolver.xml"
	defaultRelyingParty="urn:mace:inqueue:example.org" 
	providerId="urn:mace:inqueue:example.org">

	<RelyingParty name="urn:mace:inqueue:example.org" signingCredential="foo">
		<HSNameFormat nameMapping="shm"/>
	</RelyingParty>

	<!-- You'll need to get a test credential from an InQueue CA -->
	<!--
	<RelyingParty name="urn:mace:inqueue" signingCredential="inqueue_cred">
		<HSNameFormat nameMapping="shm"/>
	</RelyingParty>
	-->
	
	<ReleasePolicyEngine>
		<ArpRepository implementation="edu.internet2.middleware.shibboleth.aa.arp.provider.FileSystemArpRepository">
			<Path>/conf/arps/</Path>
		</ArpRepository>
	</ReleasePolicyEngine>

	<!-- Uncomment one of the following configuration sections to customize the logging behavior -->
	<!--
	<Logging>
		<Log4JConfig location="file:///tmp/log4j.properties" />
	</Logging>
	-->
	<!--
	<Logging>
		<ErrorLog level="DEBUG" location="file:///tmp/shib-error.log" />
		<TransactionLog location="file:///tmp/shib-access.log" />
	</Logging>
	-->

	<NameMapping 
		xmlns="urn:mace:shibboleth:namemapper:1.0" 
		id="shm" 
		format="urn:mace:shibboleth:1.0:nameIdentifier" 
		type="SharedMemoryShibHandle" 
		handleTTL="1800"/>

	<Credentials xmlns="urn:mace:shibboleth:credentials:1.0">
		<FileResolver Id="foo">
			<Key format="PEM">
				<Path>/conf/localhost.key</Path>
			</Key>
			<Certificate format="PEM">
				<Path>/conf/localhost.crt</Path>
			</Certificate>
		</FileResolver>
	</Credentials>


	<ProtocolHandler  
		implementation="edu.internet2.middleware.shibboleth.idp.provider.ShibbolethV1SSOHandler">
		<Location>http://shibboleth.example.org:8080/shibboleth/SSO</Location>
	</ProtocolHandler>
	
	<ProtocolHandler  
 		implementation="edu.internet2.middleware.shibboleth.idp.provider.SAMLv1_AttributeQueryHandler">
		<Location>http://shibboleth.example.org:8080/shibboleth/AA</Location>
	</ProtocolHandler>
	
	<ProtocolHandler  
		implementation="edu.internet2.middleware.shibboleth.idp.provider.SAMLv1_1ArtifactQueryHandler">
		<Location>http://shibboleth.example.org:8080/shibboleth/Artifact</Location>
	</ProtocolHandler>

	
	<FederationProvider type="edu.internet2.middleware.shibboleth.metadata.provider.XMLMetadataLoadWrapper"
                uri="/conf/ExampleMetadata.xml"/>
                
</IdPConfig>

