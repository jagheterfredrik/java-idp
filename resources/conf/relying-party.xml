<?xml version="1.0" encoding="UTF-8"?>

<!--
    This file specifies relying party dependent configurations for the IdP, for example, whether SAML assertions to a 
    particular relying party should be signed.  It also includes metadata provider and credential definitions used 
    when answering requests to a relying party.
-->

<RelyingPartyGroup xmlns="urn:mace:shibboleth:2.0:relying-party"
                   xmlns:saml="urn:mace:shibboleth:2.0:relying-party:saml"
                   xmlns:metadata="urn:mace:shibboleth:2.0:metadata"
                   xmlns:credential="urn:mace:shibboleth:2.0:credential"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="urn:mace:shibboleth:2.0:relying-party classpath:/schema/shibboleth-2.0-relying-party.xsd
                                       urn:mace:shibboleth:2.0:relying-party:saml classpath:/schema/shibboleth-2.0-relying-party-saml.xsd
                                       urn:mace:shibboleth:2.0:metadata classpath:/schema/shibboleth-2.0-metadata.xsd
                                       urn:mace:shibboleth:2.0:credential classpath:/schema/shibboleth-2.0-credential.xsd">
                                       
    <AnonymousRelyingParty provider="http://example.org/IdP" />
    
    <DefaultRelyingParty provider="http://example.org/IdP" />
    
    <RelyingParty id="urn:mace:incommon"
                  provider="http://example.org/IdP" 
                  defaultSigningCredentialRef="MySigningKey">
        <ProfileConfiguration xsi:type="saml:ShibbolethSSOProfile" />
        <ProfileConfiguration xsi:type="saml:SAML2SSOProfile" />
    </RelyingParty>
    
    <MetadataProvider xsi:type="FileBackedURLMetadataProvider" xmlns="urn:mace:shibboleth:2.0:metadata"
                      id="incommon-metadata"
                      metadataUrl="https://wayf.incommonfederation.org/InCommon/InCommon-metadata.xml"
                      backingFile="$IDP_HOME/temp/metadata/incommon.xml"/>
    
    <Credential xsi:type="InlineCredential" xmlns="urn:mace:shibboleth:2.0:credential"
                id="MySigningKey">
        <PrivateKey>
            <!-- Encoded key -->
        </PrivateKey>
        <PublicKey>
            <!-- Encoded key -->
        </PublicKey>
    </Credential>

</RelyingPartyGroup>