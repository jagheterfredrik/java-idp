<?xml version="1.0"?>
<WayfConfig 
        xmlns="urn:mace:shibboleth:wayf:config:1.0" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >

<!-- The default behaviour of Service is controlled via the elements
     and attributes below.  Non default behaviour is achieved by
     specifying any or all of these in the specific
     DiscoveryServiceHanlder element.

     The handleCookie attribute is one of 'NeverFollow', 'AlwaysFollow',
     'FollowSingle' or 'ClearCookie' and controls how the WAYF deals
     with the _saml_idp cookie.

     The cacheDomain attribute sets the domain that the cookie will be
     written to.

     The cacheExpiration attribute sets the expiration time of the
     cookie (if the 'Remember for a week' selection is made).

     The jspFile & errorJspFile attributes control the display

     The provideList attribute controls whether a single list of all
     possible IdPs is presented.  The default wayfs.jsp works best
     if this is true if provideListofList is true.
     
     The provideListOfList attribute controls whether mutiple lists
     are presented (one for each MetadatProvider).

     The showUsableIdPs attribute controls the contents of the above
     lists.  The single list (provideList=true) is trimmed by
     excluding IdPs which do not share a metadata file with the SP.
     The multiple lists (provideListOfList=true) is trimmed by
     excluding all lists which do not specify the SP.
     
     The SearchIgnore element contains a list of words to be ignored while
     performing a search.
-->

        <Default 
            handleCookie="NeverFollow"
            jspFile="/wayf.jsp"
            errorJspFile="/wayferror.jsp"
            provideList="false"
            provideListOfList="true"
            showUnusableIdPs="false"
            cacheExpiration="604800" >
            <SearchIgnore>
                <IgnoreText>Institution</IgnoreText>
                <IgnoreText>University</IgnoreText>
                <IgnoreText>State </IgnoreText>
                <IgnoreText>School</IgnoreText>
            </SearchIgnore>
        </Default>
        
<!-- The MetadataProvider is in a similar syntax to that used to
     configure an IdP.  This means that plugins for the IdP can be
     used interchangably between the IdP and WAYF.

     The identifier element is used to uniquely distinguish the
     metadata in a Federation element below -->

        <MetadataProvider 
                displayName="Put in User Friendly Name here"
                identifier="FirstSite"
                type="edu.internet2.middleware.shibboleth.metadata.provider.XMLMetadata"
                uri="file:///usr/local/sites.xml"/>

<!-- If the WAYF is to handle data from more than one metadata source
     then more metadataproviders can be provided, as below
        
       <MetadataProvider 
                displayName="Another Name Here"
                identifier="SecondSite"
                type="edu.internet2.middleware.shibboleth.metadata.provider.XMLMetadata"
                uri="file:/usr/local/moresites.xml"/>
-->

<!-- Every handler has to be declared with a DiscoverServiceHandler
     element.  As well as the attributes and elements described above,
     each DiscoveryServiceHandler *MUST* have a location attribute.
     
     The default wayf.xml specifies that "/WAYF" and "/*.wayf" are the
     possibilities for DiscoveryServices.  If a URL matches the above,
     but does not match any location in a DiscoveryServiceHandler,
     then the first handler for which the default attribute is set
     true is invoked -->


    <DiscoveryServiceHandler
        location=".+/WAYF" 
        default="true" />

<!-- The ClearCache handler causes the cookie to be deleted.  The jsp shipped
     with the WAYF refers to this handler -->
        
    <DiscoveryServiceHandler
        location=".+/ClearCache.wayf"
        handleCookie="ClearCookie" />

<!-- Example of how to constrain a DiscoveryService to one (or more)
     explicit metadata sources.  (The default is to use all metadata
     sources)

 <DiscoveryServiceHandler location=".+/SecondOnly.wayf" >

        <Federation identifier="SecondSite"/>
    </DiscoveryServiceHandler>  
-->

</WayfConfig>
