<?xml version="1.0" encoding="UTF-8"?>

<IdPConfig
    xmlns="urn:mace:shibboleth:idp:config:1.0"
    xmlns:cred="urn:mace:shibboleth:credentials:1.0"
    xmlns:name="urn:mace:shibboleth:namemapper:1.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:mace:shibboleth:idp:config:1.0 shibboleth-idpconfig-1.0.xsd"
    AAUrl="https://idp.example.org/shibboleth-idp/AA"
    resolverConfig="$IDP_HOME$/etc/resolver.xml"
    defaultRelyingParty="urn:x-shibtest:IdP:defaultRelyingParty"
    providerId="urn:x-shibtest:IdP"
    passThruErrors="true">

    <RelyingParty name="urn:x-shibtest:IdP:defaultRelyingParty" signingCredential="test_cred">
        <NameID nameMapping="shm"/>
    </RelyingParty>
    
    <ReleasePolicyEngine>
        <ArpRepository implementation="edu.internet2.middleware.shibboleth.aa.arp.provider.FileSystemArpRepository">
            <Path>$IDP_HOME$/etc/arps/</Path>
        </ArpRepository>
    </ReleasePolicyEngine>

    <Logging>
        <ErrorLog level="DEBUG" location="$IDP_HOME$/logs/shib-error.log" />
        <TransactionLog location="$IDP_HOME$/logs/shib-access.log" />
    </Logging>

    <NameMapping
        xmlns="urn:mace:shibboleth:namemapper:1.0"
        id="shm"
        format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"
        type="SharedMemoryShibHandle"
        handleTTL="1800"/>
    
    <ArtifactMapper implementation="edu.internet2.middleware.shibboleth.artifact.provider.MemoryArtifactMapper" />

    <Credentials xmlns="urn:mace:shibboleth:credentials:1.0">
        <FileResolver Id="test_cred">
            <Key format="PEM">
                <Path>$IDP_HOME$/etc/server.key</Path>
            </Key>
            <Certificate format="PEM">
                <Path>$IDP_HOME$/etc/server.crt</Path>
            </Certificate>
        </FileResolver>
    </Credentials>
    
    <ProtocolHandler implementation="edu.internet2.middleware.shibboleth.idp.provider.ShibbolethV1SSOHandler">
        <Location>https://idp.example.org/shibboleth-idp/SSO</Location>
    </ProtocolHandler>
    
    <ProtocolHandler implementation="edu.internet2.middleware.shibboleth.idp.provider.SAMLv1_AttributeQueryHandler">
        <Location>https://idp.example.org/shibboleth-idp/AA</Location>
    </ProtocolHandler>
    
    <ProtocolHandler implementation="edu.internet2.middleware.shibboleth.idp.provider.SAMLv1_1ArtifactQueryHandler">
        <Location>https://idp.example.org/shibboleth-idp/Artifact</Location>
    </ProtocolHandler>
    
    <MetadataProvider type="edu.internet2.middleware.shibboleth.metadata.FilesystemMetadataProvider"
        path="$IDP_HOME$/etc/metadata.xml"/>

</IdPConfig>
