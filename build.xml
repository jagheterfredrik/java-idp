<project default="dist" basedir=".">

	<property name="distname" value="shibboleth"/>

	<!-- set global properties for this build -->
	<property name="root" value="."/>
	<property name="src" value="${root}/source"/>
	<property name="approot" value="${root}/webApplication"/>
	<property name="build" value="${approot}/WEB-INF/classes"/>
	<property name="libdir" value="${approot}/WEB-INF/lib"/>
	<property name="buildlibs" value="${root}/buildlibs"/>
	<property name="dist" value="${root}/dist"/>

	<path id="build.path">
		<pathelement path="${classpath}"/>
		<pathelement location="${build}"/>
		<fileset dir="${libdir}">
			<include name="**/*.jar"/>
		</fileset>
		<fileset dir="${buildlibs}">
			<include name="**/*.jar"/>
		</fileset>

	</path>

	<!-- Prepare directory structure for project build-->
	<target name="init">
		<mkdir dir="${build}"/>
		<mkdir dir="${dist}"/>
	</target>

	<!-- Compile classes and move them to ${build} -->
	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${build}" includes="**/*.java" debug="on">
			<classpath refid="build.path"/>
		</javac>
	</target>

	<target name="package">
		<war warfile="${dist}/${distname}.war" webxml="${approot}/WEB-INF/web.xml" basedir="${approot}" update="no"/>
	</target>

	<target name="dist" depends="compile, package, clean-build"/>

	<!-- Delete the ${build} and ${dist} directory trees -->
	<target name="clean" depends="clean-build, clean-dist"/>

	<target name="clean-build">
		<delete dir="${build}"/>
	</target>

	<target name="clean-dist">
		<delete dir="${dist}"/>
	</target>

</project>
